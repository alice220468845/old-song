<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>猜猜我是誰 - 明星戳戳樂</title>
    
    <!-- 引入 Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- 引入 React 相關庫 -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@600;900&display=swap" rel="stylesheet">

    <style>
        /* --- 全局樣式設定 --- */
        body {
            /* 字體設定：微軟正黑體優先 */
            font-family: "Microsoft JhengHei", "微軟正黑體", "Heiti TC", "Noto Serif TC", sans-serif;
            font-weight: 700;
            /* 背景設定：漸層粉紅 */
            background: linear-gradient(135deg, #fff0f3 0%, #ffc1cc 100%);
            height: 100vh; /* 固定視窗高度 */
            overflow: hidden; /* 隱藏捲軸 */
            display: flex;
            flex-direction: column;
        }

        /* 背景裝飾圓點 */
        .bg-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: radial-gradient(#ffffff 20%, transparent 20%);
            background-size: 30px 30px;
            background-position: 0 0;
            opacity: 0.4;
            pointer-events: none;
            z-index: -1;
        }

        /* --- 戳戳樂紅紙樣式 --- */
        .poke-paper {
            background-color: #ef4444;
            background-image: url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23991b1b' fill-opacity='0.1' fill-rule='evenodd'%3E%3Ccircle cx='3' cy='3' r='3'/%3E%3Ccircle cx='13' cy='13' r='3'/%3E%3C/g%3E%3C/svg%3E");
            transition: all 0.3s ease;
            cursor: pointer;
            border-radius: 50%;
            box-shadow: inset 0 0 15px rgba(0,0,0,0.3), 0 4px 6px rgba(0,0,0,0.1);
        }

        .poke-paper:hover {
            filter: brightness(1.1);
            transform: scale(1.03);
            box-shadow: inset 0 0 25px rgba(0,0,0,0.2), 0 8px 12px rgba(0,0,0,0.15);
        }

        /* --- 動畫效果 --- */
        @keyframes tearEffect {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.4) rotate(15deg); opacity: 0.6; }
            100% { transform: scale(0); opacity: 0; visibility: hidden; }
        }
        .is-poked { animation: tearEffect 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards; pointer-events: none; }

        @keyframes shine { 100% { left: 125%; } }
        .group-hover\:animate-shine:hover { animation: shine 1s; }

        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .img-fade-in { animation: fadeIn 0.5s ease-out; }

        .premium-text-shadow { text-shadow: 2px 2px 0px #fff, 4px 4px 0px rgba(244, 114, 182, 0.3); }

        /* YouTube 播放器容器樣式 */
        #youtube-player-container iframe { width: 100%; height: 100%; border-radius: 1rem; }
    </style>
</head>
<body>
    <div class="bg-pattern"></div>
    <div id="root" class="h-full w-full"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- 精緻圖標組件 (Icon Components) ---
        const IconBase = ({ size = 24, className = "", children }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2.5" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {children}
            </svg>
        );
        const RefreshCw = (props) => <IconBase {...props}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></IconBase>;
        const Play = (props) => <IconBase {...props}><circle cx="12" cy="12" r="10"/><polygon points="10 8 16 12 10 16 10 8" fill="currentColor" stroke="none"/></IconBase>;
        const Volume2 = (props) => <IconBase {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><path d="M15.54 8.46a5 5 0 0 1 0 7.07"/><path d="M19.07 4.93a10 10 0 0 1 0 14.14"/></IconBase>;
        const VolumeX = (props) => <IconBase {...props}><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"/><line x1="23" y1="9" x2="17" y2="15"/><line x1="17" y1="9" x2="23" y2="15"/></IconBase>;
        const ArrowRight = (props) => <IconBase {...props}><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></IconBase>;
        const ArrowLeft = (props) => <IconBase {...props}><path d="m12 19-7-7 7-7"/><path d="M19 12H5"/></IconBase>;
        const Eye = (props) => <IconBase {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></IconBase>;
        const Trophy = (props) => <IconBase {...props}><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></IconBase>;
        const ChevronUp = (props) => <IconBase {...props}><path d="m18 15-6-6-6 6"/></IconBase>;
        const ChevronDown = (props) => <IconBase {...props}><path d="m6 9 6 6 6-6"/></IconBase>;
        const Star = (props) => <IconBase {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" fill="currentColor" stroke="currentColor"/></IconBase>;

        // --- 戳戳格組件 (PokeHole) ---
        const PokeHole = ({ index, photo, isPoked, onPoke, isRevealed }) => {
            return (
                <div className="flex flex-col items-center group h-full justify-start">
                    <div className="relative w-full aspect-square max-w-[180px] bg-gradient-to-br from-pink-100 to-white rounded-full shadow-[0_4px_8px_rgba(0,0,0,0.15)] overflow-hidden border-4 md:border-8 border-white ring-2 md:ring-4 ring-pink-200 transform transition duration-300 group-hover:scale-105">
                        {/* 圖片顯示設定：object-top 確保臉部對齊上方不被切掉 */}
                        <img 
                            src={photo.url} 
                            alt={photo.label}
                            className={`w-full h-full object-cover object-top transition-all duration-700 rounded-full ${isPoked || isRevealed ? 'opacity-100 scale-100' : 'opacity-0 scale-110'}`}
                            onError={(e) => { e.target.onerror = null; e.target.src = "https://via.placeholder.com/300?text=無圖片"; }}
                        />
                        {/* 圖片標籤 */}
                        {(isPoked || isRevealed) && (
                            <div className="absolute bottom-2 md:bottom-4 left-0 right-0 text-white text-center text-[10px] md:text-sm font-bold drop-shadow-md px-2 img-fade-in">
                                <span className="bg-black/60 px-2 py-0.5 rounded-full backdrop-blur-sm shadow-sm tracking-wide">{photo.label}</span>
                            </div>
                        )}
                        {/* 戳戳紙與按鈕 */}
                        {!isRevealed && (
                            <div onClick={onPoke} className={`absolute inset-0 poke-paper flex items-center justify-center border-4 border-dotted border-white/40 ${isPoked ? 'is-poked' : ''}`}>
                                <div className="bg-gradient-to-br from-yellow-300 to-yellow-500 text-red-700 rounded-full w-10 h-10 md:w-14 md:h-14 flex items-center justify-center border-2 md:border-4 border-white shadow-lg transform -rotate-12 group-hover:rotate-0 transition duration-300">
                                    <span className="text-lg md:text-2xl font-black drop-shadow-sm">戳</span>
                                </div>
                            </div>
                        )}
                    </div>
                    <div className="mt-2 font-bold text-pink-700 bg-white/90 px-3 py-1 rounded-full text-xs md:text-base border border-pink-200 shadow-sm backdrop-blur-sm tracking-wide">
                        線索 {index + 1}
                    </div>
                </div>
            );
        };

        const App = () => {
            // --- 遊戲資料 ---
            const gameData = [
                {
                    id: 1,
                    name: "楊麗花",
                    photos: [
                        { url: "https://tcmbdata.culture.tw/api/collection/image/online_metadata?uid=2312546", label: "年輕時期 (1)" },
                        { url: "https://cdn2.ettoday.net/images/4667/d4667587.jpg", label: "年輕時期 (2)" },
                        { url: "https://www.ttv.com.tw/drama17/yangli-hua/images/main_01.jpg", label: "現在照片" }
                    ]
                },
                {
                    id: 2,
                    name: "賀一航",
                    photos: [
                        { url: "https://img.ltn.com.tw/Upload/ent/page/800/2015/07/30/82.jpg", label: "年輕時期 (1)" },
                        { url: "https://uc.udn.com.tw/photo/2024/08/09/105/30266127.jpg", label: "年輕時期 (2)" },
                        { url: "https://img.ltn.com.tw/Upload/news/600/2019/06/04/157.jpg", label: "現在照片" }
                    ]
                },
                {
                    id: 3,
                    name: "陳美鳳",
                    photos: [
                        { url: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTGBhcmvmU9trypLOj15wU-DsLp83P5yHSsOg&s", label: "年輕時期 (1)" },
                        { url: "https://images.chinatimes.com/newsphoto/2024-10-20/656/20241020001631.jpg", label: "年輕時期 (2)" },
                        { url: "https://s3-ap-northeast-1.amazonaws.com/tw.com.carture/images/1200/170364632504.jpg", label: "現在照片" }
                    ]
                },
                {
                    id: 4,
                    name: "葉啟田",
                    photos: [
                        { url: "https://s.yimg.com/ny/api/res/1.2/OT._LFMmATKyPf5Ysru0Pw--/YXBwaWQ9aGlnaGxhbmRlcjt3PTY0MDtoPTg2Nw--/https://media.zenfs.com/zh-Hant-TW/homerun/mirrormedia.mg/3d4147a4e855326147e5c2b11aa17e38", label: "年輕時期 (1)" },
                        { url: "https://p3-sdbk2-media.byteimg.com/tos-cn-i-xv4ileqgde/a94f65118a5f40c2bfadb3365b8979f2~tplv-xv4ileqgde-resize-w:750.image", label: "年輕時期 (2)" },
                        { url: "https://s.yimg.com/ny/api/res/1.2/XZHGgGRqN15VSpYoDPG0Fg--/YXBwaWQ9aGlnaGxhbmRlcjt3PTY0MDtoPTM2MA--/https://media.zenfs.com/zh-tw/news_tvbs_com_tw_938/8a6cbfd0d1a42b61ec0ab184cf5ccde2", label: "現在照片" }
                    ]
                },
                {
                    id: 5,
                    name: "張晨光",
                    photos: [
                        { url: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTdfy7AdtcrAA7VYMNyTeLJFQT4V3vabEiKmw&s", label: "年輕時期" },
                        { url: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTRmPNNy-lQxApfdcCRkk6rl9AmFOpDVmI5Xg&s", label: "戲劇劇照" },
                        { url: "https://v3-statics.mirrormedia.mg/images/20210329172012-0810db9e002a85e394b35e857741c471-w1600.webP", label: "現在照片" }
                    ]
                },
                {
                    id: 6,
                    name: "張惠妹",
                    photos: [
                        { url: "https://resize-image.vocus.cc/resize?compression=6&norotation=true&url=https%3A%2F%2Fimages.vocus.cc%2Fec998dd5-ad49-4ee8-899f-ffc5e67ab43b.png&width=740&sign=uu-Vso-piL8EjQ5QjovHi6OkkfjZV6cgzwCs3HOKxIk", label: "五燈獎時期" },
                        { url: "https://p3-pc-sign.douyinpic.com/tos-cn-i-0813/oAZAAa9DAEB5i6iEATQzCQ9iPaEIAviIUjWpA~tplv-dy-aweme-images:q75.webp?biz_tag=aweme_images&from=327834062&lk3s=138a59ce&s=PackSourceEnum_SEARCH&sc=image&se=false&x-expires=1768071600&x-signature=9B6PFgpPjQbXN%2BKrviesIDkMJSA%3D", label: "早期宣傳" },
                        { url: "https://iam.marieclaire.com.tw/s1200c675h100b0webp100/assets/mc/202511/690B0F4697A281762332486.jpeg", label: "現在照片" }
                    ]
                },
                {
                    id: 7,
                    name: "葉全真",
                    photos: [
                        { url: "https://p3-pc-sign.douyinpic.com/tos-cn-i-0813/ooixKNAfAfmAfeJDBBefyeuAE6BxAEauuZfE7Af~tplv-dy-aweme-images:q75.webp?biz_tag=aweme_images&from=327834062&lk3s=138a59ce&s=PackSourceEnum_SEARCH&sc=image&se=false&x-expires=1768136400&x-signature=fXoIE%2FYogcwofFhal5049mUqxPk%3D", label: "電影時期" },
                        { url: "https://www.popdaily.com.tw/shaper/wp-content/uploads/2023/12/9tjakf2sqakg8owsggc408k08s6d9d6.jpeg?resize-w=1700&resize-h=968&format=webp", label: "清純照片" },
                        { url: "https://media.nownews.com/nn_media/thumbnail/2025/09/1758695358375-a8cf895c314d44a99233f7057d7ea7a5-800x451.webp?unShow=false", label: "現在照片" }
                    ]
                },
                {
                    id: 8,
                    name: "譚艾珍",
                    photos: [
                        { url: "https://static.ctwant.com/images/content/43/56643/e515c751d9790b3b7f8070971c97e9f6.jpg", label: "年輕模特" },
                        { url: "https://img.ltn.com.tw/Upload/ent/page/800/2015/05/11/phpKLAEbA.jpg", label: "戲劇時期" },
                        { url: "https://static.tvbs.com.tw/health2.0/images/uploads/2024/12/20241217160929-tsEPrNk0.jpg", label: "現在照片" }
                    ]
                },
                {
                    id: 9,
                    name: "鄧麗君",
                    photos: [
                        { url: "https://s.yimg.com/ny/api/res/1.2/TWNGGPmU4_70UocezggNWg--/YXBwaWQ9aGlnaGxhbmRlcjt3PTY0MDtoPTQ1MA--/https://media.zenfs.com/zh-tw/setn.com.tw/2f9d15b40328e28cc8b85c5cbd51a1f0", label: "年輕時期 (1)" },
                        { url: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTMHFEnUHCM4yS1bvPIwcsHgKABGXn4PCh4CQ&s", label: "年輕時期 (2)" },
                        { url: "https://v3-statics.mirrormedia.mg/images/20230824134139-18fc96636065b159b2ec1f92a678ea28-w1600.webP", label: "經典照片" }
                    ]
                }
            ];

            // --- 狀態管理 ---
            const [currentRound, setCurrentRound] = useState(0);
            const [gameState, setGameState] = useState('welcome');
            const [pokedHistory, setPokedHistory] = useState({}); 
            const [revealedHistory, setRevealedHistory] = useState({});
            const [isMusicPlaying, setIsMusicPlaying] = useState(false);
            const [isPlayerExpanded, setIsPlayerExpanded] = useState(false);
            const playerRef = useRef(null);
            
            const currentPoked = pokedHistory[currentRound] || [false, false, false];
            const currentRevealed = revealedHistory[currentRound] || false;
            const currentItem = gameData[currentRound];

            // --- YouTube API 初始化 ---
            useEffect(() => {
                const tag = document.createElement('script');
                tag.src = "https://www.youtube.com/iframe_api";
                const firstScriptTag = document.getElementsByTagName('script')[0];
                firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                window.onYouTubeIframeAPIReady = () => {
                    playerRef.current = new YT.Player('youtube-player', {
                        height: '100%', 
                        width: '100%', 
                        videoId: 'L1IZa9XiD00', // 更新的音樂 ID
                        playerVars: { 
                            'playsinline': 1, 
                            'controls': 1, 
                            'loop': 1, 
                            'playlist': 'L1IZa9XiD00' // 確保循環播放
                        },
                        events: { 
                            'onReady': (e) => e.target.setVolume(50), 
                            'onStateChange': (e) => setIsMusicPlaying(e.data === YT.PlayerState.PLAYING) 
                        }
                    });
                };
            }, []);

            const toggleMusic = () => {
                if (!playerRef.current || !playerRef.current.playVideo) return;
                isMusicPlaying ? playerRef.current.pauseVideo() : playerRef.current.playVideo();
            };

            const startGame = () => {
                setGameState('playing');
                if (playerRef.current && playerRef.current.playVideo) playerRef.current.playVideo();
            };

            const handlePoke = (index) => {
                if (currentPoked[index] || currentRevealed) return;
                const newPoked = [...currentPoked];
                newPoked[index] = true;
                setPokedHistory(prev => ({ ...prev, [currentRound]: newPoked }));
            };

            const revealAnswer = () => {
                setRevealedHistory(prev => ({ ...prev, [currentRound]: true }));
                setPokedHistory(prev => ({ ...prev, [currentRound]: [true, true, true] }));
            };

            const changeRound = (index) => {
                if (index >= 0 && index < gameData.length) setCurrentRound(index);
            };

            const nextRound = () => {
                if (currentRound < gameData.length - 1) setCurrentRound(currentRound + 1);
                else setGameState('finished');
            };

            const restartGame = () => {
                setCurrentRound(0);
                setPokedHistory({});
                setRevealedHistory({});
                setGameState('playing');
            };

            // --- 畫面佈局 ---
            return (
                <div className="h-full flex flex-col items-center justify-center p-2 md:p-4 overflow-hidden relative">
                    
                    {/* 歡迎畫面 */}
                    {gameState === 'welcome' && (
                        <div className="bg-white/80 p-6 md:p-10 rounded-[1.5rem] shadow-2xl max-w-lg w-full text-center border-4 border-white/50 backdrop-blur-md flex flex-col justify-center gap-4">
                            <h1 className="text-4xl md:text-5xl font-black text-pink-600 premium-text-shadow tracking-widest flex items-center justify-center gap-2">
                                <Star size={36} className="text-yellow-400 animate-pulse" />
                                猜猜我是誰
                                <Star size={36} className="text-yellow-400 animate-pulse" />
                            </h1>
                            <div className="inline-block bg-gradient-to-r from-pink-500 to-rose-500 text-white font-bold px-6 py-2 rounded-full text-xl transform -rotate-2 border-2 border-white shadow-xl ring-2 ring-pink-200 tracking-wider mx-auto">
                                明星戳戳樂版
                            </div>
                            <button onClick={startGame} className="w-full bg-gradient-to-b from-yellow-300 to-yellow-500 hover:from-yellow-400 hover:to-yellow-600 text-pink-900 text-2xl font-black py-4 rounded-xl shadow-[0_4px_0_#b45309] active:translate-y-1 transition flex items-center justify-center gap-2 border-2 border-white group relative overflow-hidden">
                                <span className="relative z-10 flex items-center gap-2 drop-shadow-sm tracking-wide"><Play size={32} /> 開始遊戲</span>
                                <div className="absolute top-0 -left-full w-full h-full bg-white/30 skew-x-12 group-hover:animate-shine" />
                            </button>
                            <div className="pt-4 border-t border-pink-100 flex flex-col items-center gap-2">
                                <p className="text-pink-800 text-base font-bold tracking-wide">設計者：卓佳蓉 Alice Cho 愛妮老師</p>
                                <div className="flex items-center gap-1 text-pink-700 bg-gradient-to-r from-pink-50 to-white px-4 py-1 rounded-full text-xs font-bold shadow-sm border border-pink-100 tracking-wide">
                                    <Trophy size={14} className="text-yellow-500" />
                                    <span>國立中正大學高齡者教育研究所第一名</span>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* 結束畫面 */}
                    {gameState === 'finished' && (
                        <div className="bg-white/90 p-8 rounded-[1.5rem] shadow-2xl max-w-md w-full text-center border-4 border-white/50 backdrop-blur-sm">
                            <Trophy className="w-24 h-24 text-yellow-400 mx-auto mb-4 drop-shadow-lg animate-bounce" />
                            <h2 className="text-4xl font-black text-pink-600 mb-4 premium-text-shadow tracking-wide">挑戰完成！</h2>
                            <p className="text-gray-600 text-lg mb-6 font-medium tracking-wide">太厲害了！所有的明星都逃不過你的法眼！</p>
                            <button onClick={restartGame} className="w-full bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600 text-white text-xl font-bold py-4 rounded-xl shadow-lg transition flex items-center justify-center gap-2 border-2 border-white tracking-wider">
                                <RefreshCw size={24} /> 再玩一次
                            </button>
                        </div>
                    )}

                    {/* 遊戲主畫面 */}
                    {gameState === 'playing' && (
                        <div className="w-full max-w-4xl h-full flex flex-col items-center justify-center md:justify-start">
                            {/* 控制列 */}
                            <div className="flex justify-between items-center w-full mb-2 md:mb-4 px-2 gap-2 flex-none">
                                <div className="flex items-center bg-white/90 rounded-full border-2 border-pink-200 shadow-md backdrop-blur-sm px-1 py-1 flex-1 max-w-sm mx-auto">
                                    <button onClick={() => changeRound(currentRound - 1)} disabled={currentRound === 0} className={`p-2 rounded-full transition ${currentRound === 0 ? 'opacity-30 text-gray-400' : 'text-pink-600 hover:bg-pink-50'}`}>
                                        <ArrowLeft size={24}/>
                                    </button>
                                    <div className="flex-1 text-center border-l border-r border-pink-100 mx-1">
                                        <select value={currentRound} onChange={(e) => changeRound(Number(e.target.value))} className="bg-transparent text-lg md:text-xl font-black text-pink-600 focus:outline-none cursor-pointer text-center appearance-none w-full">
                                            {gameData.map((_, idx) => <option key={idx} value={idx}>第 {idx + 1} 題</option>)}
                                        </select>
                                    </div>
                                    <button onClick={() => changeRound(currentRound + 1)} disabled={currentRound === gameData.length - 1} className={`p-2 rounded-full transition ${currentRound === gameData.length - 1 ? 'opacity-30 text-gray-400' : 'text-pink-600 hover:bg-pink-50'}`}>
                                        <ArrowRight size={24}/>
                                    </button>
                                </div>
                                <button onClick={toggleMusic} className={`p-2 rounded-full shadow-md border-2 border-white transition transform hover:scale-105 flex-none ${isMusicPlaying ? 'bg-gradient-to-br from-yellow-400 to-yellow-500 text-white' : 'bg-gray-200 text-gray-400'}`}>
                                    {isMusicPlaying ? <Volume2 size={24} /> : <VolumeX size={24} />}
                                </button>
                            </div>

                            {/* 戳戳樂盒 */}
                            <div className="bg-white/80 p-3 md:p-6 rounded-[2rem] shadow-xl border-4 md:border-8 border-pink-200/60 w-full relative backdrop-blur-md flex-1 min-h-0 flex flex-col justify-between max-h-[75vh]">
                                <div className="text-center text-pink-700 text-xl md:text-3xl font-black mb-2 md:mb-4 drop-shadow-sm bg-pink-50/80 py-2 px-4 rounded-full mx-auto border border-pink-200 shadow-sm flex items-center gap-2 flex-none">
                                    <span className="tracking-widest">戳破紙張找線索</span>
                                </div>

                                <div className="grid grid-cols-3 gap-3 md:gap-6 px-1 md:px-4 flex-1 items-center justify-items-center">
                                    {currentItem.photos.map((photo, idx) => (
                                        <PokeHole key={`${currentRound}-${idx}`} index={idx} photo={photo} isPoked={currentPoked[idx]} onPoke={() => handlePoke(idx)} isRevealed={currentRevealed} />
                                    ))}
                                </div>

                                <div className="flex flex-col items-center justify-center gap-2 mt-2 md:mt-4 flex-none min-h-[100px]">
                                    {!currentRevealed ? (
                                        <button onClick={revealAnswer} className="bg-gradient-to-b from-yellow-300 to-yellow-500 hover:from-yellow-400 hover:to-yellow-600 text-pink-900 text-xl md:text-3xl font-black py-3 px-8 md:px-12 rounded-full shadow-[0_4px_0_#b45309] active:translate-y-1 transition transform hover:scale-105 border-2 md:border-4 border-white group">
                                            <span className="flex items-center gap-2 drop-shadow-sm tracking-widest"><Eye size={28} className="md:w-8 md:h-8"/> 公佈答案</span>
                                        </button>
                                    ) : (
                                        <div className="text-center animate-fade-in-up w-full flex flex-col items-center">
                                            <div className="bg-gradient-to-br from-pink-50 to-white border-2 md:border-4 border-pink-300 px-4 py-2 md:p-4 rounded-2xl mb-2 md:mb-4 transform rotate-1 shadow-lg w-full max-w-xs md:max-w-md relative">
                                                <div className="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-pink-500 text-white px-3 py-0.5 rounded-full text-xs font-bold shadow-sm tracking-wider">正確解答</div>
                                                <h2 className="text-3xl md:text-5xl font-black text-pink-600 premium-text-shadow tracking-widest mt-1">{currentItem.name}</h2>
                                            </div>
                                            {currentRound < gameData.length - 1 ? (
                                                <button onClick={nextRound} className="bg-gradient-to-b from-green-400 to-green-600 hover:from-green-500 hover:to-green-700 text-white text-lg md:text-2xl font-bold py-3 px-8 md:px-12 rounded-full shadow-[0_4px_0_#15803d] active:translate-y-1 transition flex items-center gap-2 border-2 md:border-4 border-white tracking-widest">
                                                    下一題 <ArrowRight size={24} className="md:w-8 md:h-8"/>
                                                </button>
                                            ) : (
                                                <button onClick={() => setGameState('finished')} className="bg-gradient-to-b from-blue-400 to-blue-600 hover:from-blue-500 hover:to-blue-700 text-white text-lg md:text-2xl font-bold py-3 px-8 md:px-12 rounded-full shadow-[0_4px_0_#1d4ed8] active:translate-y-1 transition flex items-center gap-2 border-2 md:border-4 border-white tracking-widest">
                                                    看結果 <Trophy size={24} className="md:w-8 md:h-8"/>
                                                </button>
                                            )}
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* 底部音樂播放器 */}
                    <div className={`fixed bottom-0 left-0 w-full bg-pink-900 text-white transition-all duration-300 z-50 border-t-4 border-pink-400 shadow-[0_-4px_15px_rgba(0,0,0,0.3)] ${isPlayerExpanded ? 'h-72' : 'h-8 md:h-10'}`}>
                        <button onClick={() => setIsPlayerExpanded(!isPlayerExpanded)} className="w-full h-full max-h-10 flex items-center justify-center bg-pink-800 hover:bg-pink-700 transition font-bold text-sm gap-2">
                            {isPlayerExpanded ? <><span className="tracking-wide">收合音樂</span><ChevronDown size={16}/></> : <><span className="tracking-wide">展開背景音樂</span><ChevronUp size={16}/></>}
                        </button>
                        <div className={`w-full h-[calc(100%-2.5rem)] flex items-center justify-center p-4 ${isPlayerExpanded ? 'opacity-100 visible delay-100' : 'opacity-0 invisible'} transition-all duration-300`}>
                            <div id="youtube-player-container" className="w-full max-w-lg h-full rounded-xl overflow-hidden shadow-2xl border-4 border-pink-300 bg-black">
                                <div id="youtube-player"></div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
